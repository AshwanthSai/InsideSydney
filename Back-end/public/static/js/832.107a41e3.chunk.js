"use strict";(self.webpackChunkinsidesydney=self.webpackChunkinsidesydney||[]).push([[832],{1832:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(5043),i=(a(8275),a(2479)),l=a(1147),r=a(5400),n=a(754),d=a(5066),u=a(7837),o=a(5323),c=a(1318),p=a(7606),v=a(4356),h=a(579);const m=()=>{const{isLoading:e,error:t,sendRequest:a,clearError:m}=(0,d.A)(),{userId:x,token:y}=(0,s.useContext)(u.A),[f,g]=(0,n.A)({title:{value:"",isValid:!0},description:{value:"",isValid:!0},address:{value:"",isValid:!0},image:{value:null,isValid:!1}},!1),A=(0,o.W6)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.A,{error:t,onClear:m}),(0,h.jsxs)("form",{className:"place-form",children:[e&&(0,h.jsx)(p.A,{center:!0,asOverlay:!0}),(0,h.jsx)(i.A,{element:"input",id:"title",type:"text",label:"Title",validators:[(0,l.B_)()],onInput:g,errorText:"Please enter a valid title"}),(0,h.jsx)(i.A,{element:"textarea",id:"description",type:"text",label:"Description",validators:[(0,l.Ik)(5)],onInput:g,errorText:"Please enter a longer address"}),(0,h.jsx)(i.A,{element:"textarea",id:"address",type:"text",label:"Address",validators:[(0,l.Ik)(5)],onInput:g,errorText:"Please enter a longer address"}),(0,h.jsx)(v.A,{center:!0,id:"image",onInput:g,onError:"Please Pick a Valid File"}),(0,h.jsx)(r.A,{type:"submit",disabled:!f.isValid,onClick:async e=>{e.preventDefault();try{const e=new FormData;e.append("title",f.inputs.title.value),e.append("description",f.inputs.description.value),e.append("address",f.inputs.address.value),e.append("image",f.inputs.image.value);await a("".concat("https://insidesydney.onrender.com","/places/new"),"POST",e,{Authorization:"Bearer "+y});A.push("/")}catch(t){}},children:"Submit"})]})]})}},4356:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(5043),i=a(5400),l=a(579);const r=e=>{const[t,a]=(0,s.useState)(),[r,n]=(0,s.useState)(),[d,u]=(0,s.useState)(!1),o=(0,s.useRef)();return(0,s.useEffect)((()=>{if(!t)return;const e=new FileReader;e.onload=()=>{n(e.result)},e.readAsDataURL(t)}),[t]),(0,l.jsx)(s.Fragment,{children:(0,l.jsxs)("div",{className:"form-control",children:[(0,l.jsx)("input",{id:e.id,type:"file",accept:".jpg,.png,jpeg",style:{display:"none"},ref:o,onChange:t=>{let s,i=d;t.target.files&&1===t.target.files.length?(s=t.target.files[0],a(s),u(!0),i=!0):u(!1),e.onInput(e.id,s,i)}}),(0,l.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,l.jsxs)("div",{className:"image-upload__preview",children:[r&&(0,l.jsx)("img",{src:r,alt:"Preview"}),!r&&(0,l.jsx)("p",{children:"Please pick an image."})]}),(0,l.jsx)(i.A,{type:"button",onClick:e=>{o.current.click()},children:"Pick Image"})]}),!d&&(0,l.jsx)("p",{children:e.errorText})]})})}},2479:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5043),i=a(1147),l=a(579);const r=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.value,isValid:(0,i.tf)(t.value,t.validators)};case"TOUCHED":return{...e,isTouched:t.isTouched};default:return e}},n=e=>{const[t,a]=(0,s.useReducer)(r,{value:e.value||"",isTouched:!1,isValid:e.validity||""}),i=t=>{a({type:"CHANGE",value:t.target.value,validators:e.validators})},n=e=>{a({type:"TOUCHED",isTouched:!0})},d="input"===e.element?(0,l.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,value:t.value,onChange:i,onBlur:n}):(0,l.jsx)("textarea",{id:e.id,rows:e.rows||3,value:t.value,onChange:i,onBlur:n}),{id:u,onInput:o}=e,{value:c,isValid:p}=t;return(0,s.useEffect)((()=>{o(u,c,p)}),[o,c,p]),(0,l.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:e.id,children:e.label}),d,!t.isValid&&t.isTouched&&(0,l.jsx)("p",{children:e.errorText})]})}},754:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(5043);const i=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let a=!0;for(const s in e.inputs)a=s===t.inputID?a&&t.isValid:a&&e.inputs[s].isValid;return{...e,inputs:{...e.inputs,[t.inputID]:{value:t.value,isValid:t.isValid}},isValid:a};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return{...e}}},l=(e,t)=>{const[a,l]=(0,s.useReducer)(i,{inputs:e,isValid:t});return[a,(0,s.useCallback)(((e,t,a)=>{l({type:"INPUT_CHANGE",inputID:e,value:t,isValid:a})}),[]),(0,s.useCallback)(((e,t)=>{l({eventType:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},1147:(e,t,a)=>{a.d(t,{B_:()=>n,Ik:()=>d,i$:()=>u,tf:()=>o});const s="REQUIRE",i="MINLENGTH",l="MAXLENGTH",r="EMAIL",n=()=>({type:s}),d=e=>({type:i,val:e}),u=()=>({type:r}),o=(e,t)=>{let a=!0;for(const n of t)n.type===s&&(a=a&&e.trim().length>0),n.type===i&&(a=a&&e.trim().length>=n.val),n.type===l&&(a=a&&e.trim().length<=n.val),"MIN"===n.type&&(a=a&&+e>=n.val),"MAX"===n.type&&(a=a&&+e<=n.val),n.type===r&&(a=a&&/^\S+@\S+\.\S+$/.test(e));return a}},8275:()=>{}}]);
//# sourceMappingURL=832.107a41e3.chunk.js.map