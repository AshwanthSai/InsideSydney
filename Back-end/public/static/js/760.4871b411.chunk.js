"use strict";(self.webpackChunkinsidesydney=self.webpackChunkinsidesydney||[]).push([[760],{4356:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(5043),i=t(5400),n=t(579);const l=e=>{const[s,t]=(0,a.useState)(),[l,r]=(0,a.useState)(),[o,d]=(0,a.useState)(!1),u=(0,a.useRef)();return(0,a.useEffect)((()=>{if(!s)return;const e=new FileReader;e.onload=()=>{r(e.result)},e.readAsDataURL(s)}),[s]),(0,n.jsx)(a.Fragment,{children:(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("input",{id:e.id,type:"file",accept:".jpg,.png,jpeg",style:{display:"none"},ref:u,onChange:s=>{let a,i=o;s.target.files&&1===s.target.files.length?(a=s.target.files[0],t(a),d(!0),i=!0):d(!1),e.onInput(e.id,a,i)}}),(0,n.jsxs)("div",{className:"image-upload ".concat(e.center&&"center"),children:[(0,n.jsxs)("div",{className:"image-upload__preview",children:[l&&(0,n.jsx)("img",{src:l,alt:"Preview"}),!l&&(0,n.jsx)("p",{children:"Please pick an image."})]}),(0,n.jsx)(i.A,{type:"button",onClick:e=>{u.current.click()},children:"Pick Image"})]}),!o&&(0,n.jsx)("p",{children:e.errorText})]})})}},2479:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(5043),i=t(1147),n=t(579);const l=(e,s)=>{switch(s.type){case"CHANGE":return{...e,value:s.value,isValid:(0,i.tf)(s.value,s.validators)};case"TOUCHED":return{...e,isTouched:s.isTouched};default:return e}},r=e=>{const[s,t]=(0,a.useReducer)(l,{value:e.value||"",isTouched:!1,isValid:e.validity||""}),i=s=>{t({type:"CHANGE",value:s.target.value,validators:e.validators})},r=e=>{t({type:"TOUCHED",isTouched:!0})},o="input"===e.element?(0,n.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,value:s.value,onChange:i,onBlur:r}):(0,n.jsx)("textarea",{id:e.id,rows:e.rows||3,value:s.value,onChange:i,onBlur:r}),{id:d,onInput:u}=e,{value:c,isValid:p}=s;return(0,a.useEffect)((()=>{u(d,c,p)}),[u,c,p]),(0,n.jsxs)("div",{className:"form-control ".concat(!s.isValid&&s.isTouched&&"form-control--invalid"),children:[(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),o,!s.isValid&&s.isTouched&&(0,n.jsx)("p",{children:e.errorText})]})}},754:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(5043);const i=(e,s)=>{switch(s.type){case"INPUT_CHANGE":let t=!0;for(const a in e.inputs)t=a===s.inputID?t&&s.isValid:t&&e.inputs[a].isValid;return{...e,inputs:{...e.inputs,[s.inputID]:{value:s.value,isValid:s.isValid}},isValid:t};case"SET_DATA":return{inputs:s.inputs,isValid:s.formIsValid};default:return{...e}}},n=(e,s)=>{const[t,n]=(0,a.useReducer)(i,{inputs:e,isValid:s});return[t,(0,a.useCallback)(((e,s,t)=>{n({type:"INPUT_CHANGE",inputID:e,value:s,isValid:t})}),[]),(0,a.useCallback)(((e,s)=>{n({eventType:"SET_DATA",inputs:e,formIsValid:s})}),[])]}},1147:(e,s,t)=>{t.d(s,{B_:()=>r,Ik:()=>o,i$:()=>d,tf:()=>u});const a="REQUIRE",i="MINLENGTH",n="MAXLENGTH",l="EMAIL",r=()=>({type:a}),o=e=>({type:i,val:e}),d=()=>({type:l}),u=(e,s)=>{let t=!0;for(const r of s)r.type===a&&(t=t&&e.trim().length>0),r.type===i&&(t=t&&e.trim().length>=r.val),r.type===n&&(t=t&&e.trim().length<=r.val),"MIN"===r.type&&(t=t&&+e>=r.val),"MAX"===r.type&&(t=t&&+e<=r.val),r.type===l&&(t=t&&/^\S+@\S+\.\S+$/.test(e));return t}},9760:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(5043),i=t(754),n=t(2479),l=t(1147),r=t(5400),o=t(9954),d=t(7837),u=t(7606),c=t(1318),p=t(5066),v=t(1688),m=t(4356),h=t(579);const g=e=>{const{userId:s,logIn:t,logOut:g}=(0,a.useContext)(d.A),[y,x]=(0,a.useState)(!0),[f,j,A]=(0,i.A)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!0),{isLoading:I,error:T,sendRequest:w,clearError:V}=(0,p.A)(),E=(0,v.useHistory)();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.A,{error:T,onClear:V}),(0,h.jsxs)(o.A,{className:"authentication",children:[y?(0,h.jsx)("h2",{children:" Log In "}):(0,h.jsx)("h2",{children:" Sign Up "}),(0,h.jsx)("hr",{}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),y)try{const e=await w("".concat("https://insidesydney.onrender.com","/users/login"),"POST",JSON.stringify({email:f.inputs.email.value,password:f.inputs.password.value}),{"Content-Type":"application/json"});console.log(e),t(e.userExist.id,e.token),E.push("/")}catch(s){console.log(T),console.log(s)}else try{const e=new FormData;e.append("name",f.inputs.name.value),e.append("email",f.inputs.email.value),e.append("password",f.inputs.email.value),e.append("image",f.inputs.image.value);const s=await w("".concat("https://insidesydney.onrender.com","/users/signup"),"POST",e);console.log(s),t(s.newUser.id,s.token),E.push("/")}catch(s){console.log(s)}},children:[I&&(0,h.jsx)(u.A,{asOverlay:!0}),!y&&(0,h.jsx)(n.A,{element:"input",id:"name",type:"text",label:"Name",validators:[(0,l.Ik)(5),(0,l.B_)()],onInput:j,errorText:"Please enter a valid name"}),(0,h.jsx)(n.A,{element:"input",id:"email",type:"email",label:"Email",validators:[(0,l.i$)(),(0,l.B_)()],onInput:j,errorText:"Please enter a valid email"}),!y&&(0,h.jsx)(m.A,{center:!0,id:"image",onInput:j,onError:"Please Pick a Valid File"}),(0,h.jsx)(n.A,{element:"input",id:"password",type:"password",label:"Password",validators:[(0,l.B_)(),(0,l.Ik)(6)],onInput:j,errorText:"Please enter a valid password"}),(0,h.jsx)(r.A,{type:"submit",disabled:!f.isValid,children:"Submit"})]}),(0,h.jsxs)(r.A,{inverse:!0,onClick:()=>(()=>{if(y){console.log(f);const e={...f};e.inputs.name={value:"",isValid:!1},e.inputs.image={value:null,isValid:!1},A(e,f.isValid)}else console.log(f),delete f.inputs.name,delete f.inputs.image;x((e=>!e))})(),children:["Switch to ",y?"Sign Up":"Log In"]})]})]})}}}]);
//# sourceMappingURL=760.4871b411.chunk.js.map