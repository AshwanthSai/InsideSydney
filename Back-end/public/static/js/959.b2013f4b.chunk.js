"use strict";(self.webpackChunkinsidesydney=self.webpackChunkinsidesydney||[]).push([[959],{2959:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var a=i(5043),s=i(5323),l=i(2479),n=i(1147),r=(i(8275),i(5400)),d=i(754),c=i(9954),u=i(5066),o=i(7606),p=i(1318),v=i(7837),y=i(579);const h=e=>{const t=(0,s.g)().placeId,{isLoading:i,error:h,sendRequest:f,clearError:A}=(0,u.A)(),[x,T]=(0,a.useState)(),m=(0,s.W6)(),{userId:V,token:j}=(0,a.useContext)(v.A),[I,C,E]=(0,d.A)({title:{value:"",isValid:!0},description:{value:"",isValid:!0}},!1);if((0,a.useEffect)((()=>{(async()=>{try{const e=await f("".concat("https://insidesydney.onrender.com","/places/").concat(t));T(e.result),E({title:{value:e.result.title,isValid:!0},description:{value:e.result.description,isValid:!0}},!0)}catch(h){}})()}),[t,E,f]),i)return(0,y.jsx)("div",{className:"center",children:(0,y.jsx)(o.A,{asOverlay:!0})});if(!x&&!h&&!i)return(0,y.jsx)("div",{className:"center",children:(0,y.jsx)(c.A,{children:(0,y.jsx)("h2",{children:"Could not find place!"})})});return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)(p.A,{error:h,onClear:A}),!i&&x&&(0,y.jsxs)("form",{className:"place-form ",onSubmit:e=>{e.preventDefault();(async()=>{let e={title:I.inputs.title.value,description:I.inputs.description.value};try{await f("".concat("https://insidesydney.onrender.com","/places/").concat(t),"PATCH",JSON.stringify(e),{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+j});m.push("/".concat(V,"/places"))}catch(h){}})()},children:[(0,y.jsx)(l.A,{element:"input",id:"title",type:"text",label:"Title",validators:[(0,n.B_)()],onInput:C,errorText:"Please enter a valid title",value:x.title,validity:!0}),(0,y.jsx)(l.A,{element:"textarea",id:"description",type:"text",label:"Description",validators:[(0,n.Ik)(5)],onInput:C,errorText:"Please enter a longer address",value:x.description,validity:!0}),(0,y.jsx)(r.A,{type:"submit",children:"Update Place"})]})]})}},2479:(e,t,i)=>{i.d(t,{A:()=>r});var a=i(5043),s=i(1147),l=i(579);const n=(e,t)=>{switch(t.type){case"CHANGE":return{...e,value:t.value,isValid:(0,s.tf)(t.value,t.validators)};case"TOUCHED":return{...e,isTouched:t.isTouched};default:return e}},r=e=>{const[t,i]=(0,a.useReducer)(n,{value:e.value||"",isTouched:!1,isValid:e.validity||""}),s=t=>{i({type:"CHANGE",value:t.target.value,validators:e.validators})},r=e=>{i({type:"TOUCHED",isTouched:!0})},d="input"===e.element?(0,l.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,value:t.value,onChange:s,onBlur:r}):(0,l.jsx)("textarea",{id:e.id,rows:e.rows||3,value:t.value,onChange:s,onBlur:r}),{id:c,onInput:u}=e,{value:o,isValid:p}=t;return(0,a.useEffect)((()=>{u(c,o,p)}),[u,o,p]),(0,l.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouched&&"form-control--invalid"),children:[(0,l.jsx)("label",{htmlFor:e.id,children:e.label}),d,!t.isValid&&t.isTouched&&(0,l.jsx)("p",{children:e.errorText})]})}},754:(e,t,i)=>{i.d(t,{A:()=>l});var a=i(5043);const s=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let i=!0;for(const a in e.inputs)i=a===t.inputID?i&&t.isValid:i&&e.inputs[a].isValid;return{...e,inputs:{...e.inputs,[t.inputID]:{value:t.value,isValid:t.isValid}},isValid:i};case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return{...e}}},l=(e,t)=>{const[i,l]=(0,a.useReducer)(s,{inputs:e,isValid:t});return[i,(0,a.useCallback)(((e,t,i)=>{l({type:"INPUT_CHANGE",inputID:e,value:t,isValid:i})}),[]),(0,a.useCallback)(((e,t)=>{l({eventType:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},1147:(e,t,i)=>{i.d(t,{B_:()=>r,Ik:()=>d,i$:()=>c,tf:()=>u});const a="REQUIRE",s="MINLENGTH",l="MAXLENGTH",n="EMAIL",r=()=>({type:a}),d=e=>({type:s,val:e}),c=()=>({type:n}),u=(e,t)=>{let i=!0;for(const r of t)r.type===a&&(i=i&&e.trim().length>0),r.type===s&&(i=i&&e.trim().length>=r.val),r.type===l&&(i=i&&e.trim().length<=r.val),"MIN"===r.type&&(i=i&&+e>=r.val),"MAX"===r.type&&(i=i&&+e<=r.val),r.type===n&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},8275:()=>{}}]);
//# sourceMappingURL=959.b2013f4b.chunk.js.map